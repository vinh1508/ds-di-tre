(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{33:function(e,t,a){e.exports=a(65)},57:function(e,t,a){},61:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(28),l=a.n(o);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var i=a(2),c=a(4),s=a(1),u=a(3),d=a(5),f=a(9),h=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(f.l,{id:"main-view",url:"/",main:!0})}},{key:"onPageBeforeIn",value:function(){}},{key:"onPageInit",value:function(){}}]),t}(r.a.Component),m=new function e(){Object(i.a)(this,e),this.F7App=null},p=a(29),v={report:"report"};Object.keys(v).map(function(e){return v[e]="http://localhost:8000/api/"+v[e]});var y=a(14),b=a.n(y),E=a(16),k=a.n(E),j=(new(function(){function e(){Object(i.a)(this,e),k.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded"}return Object(c.a)(e,[{key:"POST",value:function(e){var t=e.url,a=e.data,n=e.headers,r=void 0===n?{}:n,o={method:"POST",headers:Object(p.a)({},{"access-token":"","utc-offset":b()().utcOffset()},r),data:a,url:t};return console.log(JSON.stringify(o.headers)),k()(o)}},{key:"report",value:function(e){return this.POST({url:v.report,data:e,headers:{"Content-Type":"multipart/form-data"}})}}]),e}()),a(30)),O=a(31),g=(a(57),[{path:"/",component:function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).fileSelected=null,a.dataTopDiTre={},a.dataDsDiTre=[],a.state={fileSelected:null,jsonIput:null,enableExport:!1},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){return r.a.createElement(f.i,{id:"Page-Home"},r.a.createElement(f.h,null,r.a.createElement(f.g,null,"Ds \u0111i tr\u1ec5")),r.a.createElement(f.b,{strong:!0},r.a.createElement(f.j,null,r.a.createElement(f.d,null,r.a.createElement("label",{id:"lblChooseFile"},"Choose a json file ...",r.a.createElement("input",{type:"file",id:"fileInput",accept:".csv",onChange:this.fileOnChange.bind(this)})),this.renderFileInfo(),this.state.jsonIput?r.a.createElement(f.c,{fill:!0,onClick:this.onCopy.bind(this)},"Download CSV"):null),r.a.createElement(f.d,null))),r.a.createElement(f.b,{id:"list-item"},this.renderDSDiTre()))}},{key:"csvJSON",value:function(e){for(var t=e.split("\n"),a=[],n=t[0].split(","),r=1;r<t.length;r++){for(var o={},l=t[r].split(","),i=0;i<n.length;i++)o[n[i]]=l[i];a.push(o)}return JSON.stringify(a)}},{key:"fileOnChange",value:function(e){console.log("fileOnChange",e.target.files[0]);var t=e.target.files[0];this.setState({jsonIput:null,enableExport:!1}),this.fileSelected=null,t&&(this.readFileAsText(t),this.fileSelected=t,this.fileName=t.name)}},{key:"readFileAsText",value:function(e){var t=new FileReader;t.readAsText(e),t.onload=this.loadHandler.bind(this),t.onerror=this.errorHandler.bind(this)}},{key:"errorHandler",value:function(e){e.target.error&&"NotReadableError"==e.target.error.name&&console.log("Canno't read file !")}},{key:"loadHandler",value:function(e){var t=e.target,a=t.result;if(a)try{var n=this.csvJSON(a);console.log({target:t,fileSelected:this.fileSelected});var r=JSON.parse(n);this.jsonIput=r,this.enableExport=!0,console.log({jsonIput:r}),this.setState({enableExport:!0,jsonIput:r})}catch(o){console.log({error:o}),this.setState({enableExport:!1})}}},{key:"renderFileInfo",value:function(){return this.state.enableExport?r.a.createElement("div",{id:"file-info"},r.a.createElement("div",{className:"file-name"},this.fileSelected?this.fileSelected.name:"")):null}},{key:"renderThs",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=[];return Object.keys(e).forEach(function(e,o){n.push(r.a.createElement("th",{key:"".concat(a,"item-th-").concat(t,"-").concat(o),className:"item-".concat(o," item-th-").concat(o)},r.a.createElement("span",null,e)))}),n}},{key:"renderTds",value:function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=[];return Object.keys(e).forEach(function(o,l){n.push(r.a.createElement("td",{key:"".concat(a,"item-td-").concat(t,"-").concat(l),className:"item-".concat(l," item-td-").concat(l)},r.a.createElement("span",null,e[o])))}),n}},{key:"addToObject",value:function(e,t,a){var n=t.key,r=t.value,o={},l=0;for(var i in e)e.hasOwnProperty(i)&&(l===a&&n&&r&&(o[n]=r),o[i]=e[i],l++);return!a&&n&&r&&(o[n]=r),o}},{key:"groupDataByKey",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]}},{key:"filterData",value:function(e){var t=this,a=b()("09:00:00","HH:mm:ss"),n={};e.forEach(function(e,t){var a=e.Date;a&&(n[a]||(n[a]=[]),n[a].push(e))});var r={};Object.keys(n).forEach(function(e,t){var a=n[e];r[e]||(r[e]={}),a.forEach(function(t){var a=t["User ID"];r[e][a]||(r[e][a]=[]),r[e][a].push(t)})});var o={},l={};return console.log({dataByDateByUser:r}),Object.keys(r).forEach(function(e,n){var i=r[e];o[e]||(o[e]=[]),Object.keys(i).forEach(function(n,r){var c=(i[n]||[])[0];if(c){var s=b()(c.Time,"HH:mm:ss"),u=b()(e),d=u.format("YYYY-MM"),f=u.format("E");if(!["6","7"].includes(f)&&a.diff(s)<=0){var h=t.addToObject(c,{key:"day",value:u.format("dddd")},2);if(o[e].push(h),l[d]||(l[d]={}),l[d][n])l[d][n].total=l[d][n].total+1,l[d][n].date.push(c.Date);else{var m={"User ID":c["User ID"],name:c.Name,total:1,date:[c.Date]};l[d][n]=m}}}})}),{dataDsDiTreByDate:o,dataDsDiTreByUser:l}}},{key:"renderDSDiTre",value:function(){var e=this,t=[];if(!this.state.jsonIput)return null;t=this.state.jsonIput||[];var a=this.filterData(t),n=a.dataDsDiTreByDate,o=a.dataDsDiTreByUser;console.log({dataDsDiTreByDate:n,dataDsDiTreByUser:o}),t=n;var l=[],i=null,c=[];Object.keys(t).forEach(function(a,n){var o=t[a];0===n&&(i=r.a.createElement("tr",{key:"item-thead-".concat(a,"-").concat(n)},e.renderThs(o[0],n,"tables-2"))),o.forEach(function(t,n){l.push(t);var o=r.a.createElement("tr",{key:"item-".concat(a,"-").concat(n)},e.renderTds(t,n,"tables-2"));c.push(o)})}),this.dataDsDiTre=l,console.log({dataFull:l});var s=null,u=[],d=[];return Object.keys(o).forEach(function(t,a){var n=Object(j.orderBy)(o[t],"total","desc");Object.keys(n).forEach(function(t,a){var o=n[t];o.date=o.date.join(";"),s||(s=r.a.createElement("tr",{key:"table2-item-thead-".concat(t,"-").concat(a)},e.renderThs(o,a)));var l=e.renderTds(o,a,"table2-"),i=r.a.createElement("tr",{key:"tbody-2-tr-".concat(a)},l);u.push(i),d.push(o)})}),this.dataTopDiTre=d,r.a.createElement(f.j,null,r.a.createElement(f.d,null,r.a.createElement("div",{className:"data-table card"},r.a.createElement("table",{className:"table1"},r.a.createElement("thead",null,i),r.a.createElement("tbody",null,c)))),r.a.createElement(f.d,null,r.a.createElement("div",{className:"data-table card"},r.a.createElement("table",{className:"table2"},r.a.createElement("thead",null,s),r.a.createElement("tbody",null,u)))))}},{key:"convertToCSV",value:function(e){for(var t="object"!=typeof e?JSON.parse(e):e,a="",n=0;n<t.length;n++){var r="";for(var o in t[n])""!=r&&(r+=","),r+=t[n][o];a+=r+"\r\n"}return a}},{key:"exportCSVFile",value:function(e,t){var a={};Object.keys(e[0]).forEach(function(e){a[e]=e}),e.unshift(a);var n=JSON.stringify(e),r=this.convertToCSV(n),o=t+"_download.csv"||"export.csv",l=new Blob([r],{type:"text/csv;charset=utf-8;"});Object(O.saveAs)(l,o)}},{key:"onCopy",value:function(){var e=this.fileName.split(".");e.pop();var t=e.join("");this.exportCSVFile(this.dataDsDiTre,t+"_list"),this.exportCSVFile(this.dataTopDiTre,t+"_top")}}]),t}(r.a.Component)},{path:"/not-found",component:function(){return r.a.createElement(f.i,null,r.a.createElement(f.h,{title:"My Page"}),r.a.createElement(f.e,null,r.a.createElement(f.f,{title:"Item 1"}),r.a.createElement(f.f,{title:"Item 2"})))}}]),D=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.$f7ready&&this.$f7ready(function(t){window.f7=t,t.on("routeChange",function(t,a,n){e.onRouterChange(t,a,n)}),m.F7App=t})}},{key:"onRouterChange",value:function(e,t,a){console.log(e,t,a)}},{key:"render",value:function(){var e={id:"jp.co.omron.healthcare.riskreport",name:"Risk Report",theme:"ios",routes:g};return r.a.createElement(f.a,{params:e},r.a.createElement(f.k,null),r.a.createElement(h,null))}}]),t}(r.a.Component),T=a(32);a(59),a(61),a(63);T.a.use(f.m),l.a.render(r.a.createElement(D),document.getElementById("app")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[33,2,1]]]);
//# sourceMappingURL=main.75e4f01b.chunk.js.map